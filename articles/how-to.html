<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="datplot">
<title>Density Plots for Dates • datplot</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Density Plots for Dates">
<meta property="og:description" content="datplot">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data_preparation.html">Data Preparation and Visualization</a>
    <a class="dropdown-item" href="../articles/how-to.html">Density Plots for Dates</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lsteinmann/datplot/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Density Plots for Dates</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lsteinmann/datplot/blob/HEAD/vignettes/how-to.Rmd" class="external-link"><code>vignettes/how-to.Rmd</code></a></small>
      <div class="d-none name"><code>how-to.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why">Why?<a class="anchor" aria-label="anchor" href="#why"></a>
</h2>
<p>A rather common problem in archaeology is the fuzziness of dates
assigned to objects. If one wants to visualize overall changes in -
let’s say - pottery consumption, bar charts often fall short in that
regard. If we have Phases a – f, then some of the objects can usually be
dated to a, c, and f, as an example, but others will by classified as “a
to c” or “b to c”. But how can these data still be used for examining
changes in a large set of objects, respecting the quality of their
dating? The answer lies in aoristic analysis, which was implemented in
criminology to assess the general temporal occurrence of burglaries from
the reported time span in between which individual burglaries had
happened <span class="citation">(Ratcliffe 2000)</span>. This concept
has been implemented in archaeology before (see <span class="citation">Orton, Morris, and Pipe (2017)</span>, 3–5 for a recent
overview; generally credited with the first implementation for
archaeology is <span class="citation">Johnson (2004)</span>). There are
other R-packages that implement aoristic analysis in archaeology,
usually with a less object-based focus and with differing algorithms
(namely <a href="https://github.com/ISAAKiel/aoristAAR/" class="external-link">aoristAAR</a>,
<a href="https://github.com/davidcorton/archSeries" class="external-link">archSeries</a>, <a href="https://github.com/tesselle/tabula" class="external-link">tabula</a> and <a href="https://github.com/ahb108/rtfact" class="external-link">rtefact</a>). We wholeheartedly
recommend trying out those packages as well to find the best fit for
your data. This implementation (datplot) is kept rather simple. The case
study with which the package is published <span class="citation">(Weissova and Steinmann 2021)</span> addresses
classical archaeology, but the package itself is in no way restricted to
any discipline.</p>
</div>
<div class="section level2">
<h2 id="how">How?<a class="anchor" aria-label="anchor" href="#how"></a>
</h2>
<p>First, it is important to translate the phases into numbers. This
should be easily possible for archaeological data, as there is usually
an accepted date for each phase or period. While not directly providing
numeric or absolute chronological values, e.g. the <a href="https://chronontology.dainst.org/" class="external-link">iDAI chronontology</a> provides
approaches for unified terminology. Usually, this would depend on the
discipline and geographical frame of research in particular and has to
be chosen for each analysis. When a concordance for phases and their
absolute dating exists, it should be easy to apply these to single
objects. We have illustrated the process of cleaning and transforming
real world archaeological data in a very manual solution in the “Data
Preparation and Visualization”-vignette to this package. Using may cause
other problems in the end, since such phases are often employed to avoid
dates, but it is necessary as the aim is to visualize the distribution
on a (pseudo-)continuous scale, for which numbers are needed. Also, this
step may be reversed for the final visualization by supplementing or
replacing the scale on the x-axis with the respective phases. An
automated process has not been implemented yet.</p>
<p>Ideally, one can produce a ‘beginning’ and ‘end’ date for each
object, or let’s say an earliest possible dating and a latest possible
dating, e.g. corresponding to beginning and start of each phase the
object is dated to.</p>
<p>To show and explain how this would work, we chose a random sample of
Athenian pottery from the Beazley archive <span class="citation">(Oxford
n.d.)</span>, as it is a large publicly available data set. (Since the
format provided by the BAPD is slightly different from that needed here
we converted the data beforehand to match requirements. No values have
been changed. The sample data set is included in datplot. In a recent
version the Inscriptions of Bithynia data set has been added to datplot
as well. Its cleaning and formatting is detailed in the
“data_preparation”-vignette as an example for scholars looking for
approaches to the transformation of verbose and heterogeneous data. The
same vignettes also suggests some visualizations of said data set.)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lsteinmann/datplot" class="external-link">datplot</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Beazley</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">Vase.Number</th>
<th align="left">Technique</th>
<th align="right">DAT_min</th>
<th align="right">DAT_max</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">64140</td>
<td align="left">350781</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
</tr>
<tr class="even">
<td align="left">45391</td>
<td align="left">213270</td>
<td align="left">RED-FIGURE</td>
<td align="right">-475</td>
<td align="right">-425</td>
</tr>
<tr class="odd">
<td align="left">48344</td>
<td align="left">216229</td>
<td align="left">RED-FIGURE</td>
<td align="right">-450</td>
<td align="right">-400</td>
</tr>
<tr class="even">
<td align="left">47463</td>
<td align="left">215346</td>
<td align="left">RED-FIGURE</td>
<td align="right">-450</td>
<td align="right">-400</td>
</tr>
<tr class="odd">
<td align="left">58527</td>
<td align="left">305921</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
</tr>
<tr class="even">
<td align="left">97130</td>
<td align="left">9018014</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
</tr>
<tr class="odd">
<td align="left">36019</td>
<td align="left">203156</td>
<td align="left">RED-FIGURE</td>
<td align="right">-500</td>
<td align="right">-450</td>
</tr>
<tr class="even">
<td align="left">38239</td>
<td align="left">205402</td>
<td align="left">RED-FIGURE</td>
<td align="right">-500</td>
<td align="right">-450</td>
</tr>
<tr class="odd">
<td align="left">12504</td>
<td align="left">13584</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-600</td>
<td align="right">-550</td>
</tr>
<tr class="even">
<td align="left">13260</td>
<td align="left">14377</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-600</td>
<td align="right">-550</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="how-to-display-a-range">How to Display a Range?<a class="anchor" aria-label="anchor" href="#how-to-display-a-range"></a>
</h2>
<p>The table provides two dates for each object. The earliest possible
dating (DAT_min) and the latest possible dating (DAT_max). In order to
be able to process this to a <a href="https://en.wikipedia.org/wiki/Kernel_density_estimation" class="external-link">density
graph</a>, which is the most elegant means of visualization for
continuous distributions (see also <span class="citation">Crema, Bevan,
and Lake (2010)</span>, 1123 or <span class="citation">Baxter and Cool
(2016)</span>, 125–126). (At least if the goal is merely to evaluate
changes over time and the probability of object groups dating to a
certain point in time, and not to look at actual objects counts, which
will be obscured.) The scale we use is only pseudo-continuous, as the
data actually comprises of intervals (1 year, or 25 years, etc.), but we
nonetheless treat it as a continuous one.</p>
<p>Objects that can be dated with greater confidence should have a
larger impact on the overall visualization. The core function of this
package (<code><a href="../reference/datsteps.html">datsteps()</a></code>) produces a column named either
‘weight’ or ‘probability’ which contains a value that reflects the
quality of dating (‘weight’) or the probability of an object being dated
to a certain year (‘probability’). For the calculation of ‘weight’, see
<span class="citation">(Weissova and Steinmann 2021)</span>. The formula
for probability calculation is simply ‘1 / ((max - min) + 1)’.</p>
<p>In any case, the greater the time span, the lower the weight value or
probability. This is a generally accepted method of aoristic analysis
<span class="citation">(Ratcliffe 2000, 671–72 with Fig. 1)</span> and
explained in greater detail in <span class="citation">(Weissova and
Steinmann 2021)</span>. In the case of a stepsize of 1, the weight value
can be seen as an actual dating probability to the specific year. As an
example, a coin dated between 36 and 37 CE will thus have a probability
of 0.5 for the year 36, and 0.5 for the year 37. The calculation of
probability does, however not work with greater stepsizes. It is
possible to switch between both variants of calculation by using
<code>datsteps(x, calc = "weight")</code> or
<code>datsteps(x, calc = "probability")</code>. When the probability is
calculated, there is an option to add a cumulative probability column
(<code>datsteps(x, calc = "probability", cumulative = TRUE)</code>).</p>
<p>Secondly, every object is duplicated a number of times equal to the
dating range divided by the stepsize-variable. Each duplicate has its
own ‘DAT_step’ – one single value between the two extremes. The above
mentioned weight variable is divided by the number of steps, so that
each new fictional object or ‘date step’ counts only as a fraction of
the actual object. With this, we hope to achieve a greater influence of
closely dated objects and a higher emphasis on overlap.</p>
<p>This method will not be useful for dating specific contexts, since
any concept of <em>terminus post/ante quem</em> is lost here, which is
important on a smaller scale. It may however be applicable for contexts
that are disturbed, as a noticeable overlap of objects could give an
indication for the original <em>tpq</em>-date. The method is suitable
also for the visualization of changes in <em>trends</em> over time,
e.g. the popularity of pottery types, or overall peaks in occupation
from survey data <span class="citation">(Orton, Morris, and Pipe 2017,
5)</span>.</p>
<p>Other approaches, e.g. using the median date of each object, may in
some cases produce similar outcomes, but create other problems. A lot of
information is lost on the way when employing averaged or median data,
as large amount of loosely dated objects will produce peaks at
unreasonable values. (Consider a large amount of objects dated between
600 and 400 BCE all attributed to the year 500 BCE.)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Beazley</span><span class="op">$</span><span class="va">DAT_mean</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">Beazley</span><span class="op">$</span><span class="va">DAT_max</span> <span class="op">+</span> <span class="va">Beazley</span><span class="op">$</span><span class="va">DAT_min</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">Beazley</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_mean</span>, fill <span class="op">=</span> <span class="va">Technique</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">25</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/barplot-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Employing dating steps will even out unreasonable peaks. Note
especially the gap between -425 and -300 in the plot above, that is – in
the plot below – filled with a constant amount of objects in each year.
This is due to the data containing large amounts of objects dating from
-400 to -300 BCE. Of course, due to duplicating each object numerous
times (see table below), the counts represented on the y-axis now inform
us of the maximum amount of objects that might be dated to a given bin
rather than the actual amount.</p>
<p>The method datplot uses for partitioning steps an be explained as
follows: If any given object had been dated as ‘475 to 425 BC’ and steps
of 25 years were used for each object, this would result in the creation
of three sub-objects with the respective dating of: 475 BC, 450 BC, 425
BC. For an interval of 5 years, the same object would be partitioned
into 11 sub-objects, each dating to 475 BC, 470 BC, 465 BC, 460 BC, 455
BC, 450 BC, 445 BC, 440 BC, 435 BC, 430 BC and 425 BC respectively. In
order to keep the data comparable, the interval (expressed as the
stepsize-variable in the R-package) must be chosen globally for all
objects. As the time span an object is dated to can in many cases not be
divided without remainder by the value given as a stepsize (i.e. may
only be divided with the modulus of the division being greater than 0),
datplot resolves these conflicts by temporarily modifying the size of
steps for the objects in question without deviating significantly from
the size set beforehand, so that the output is representative and
comparable. Objects which are dated to a time span undercutting the
stepsize-variable can either be assigned to one year (for objects dated
precisely to one year), to two years (for objects dated to a number of
years less than or equal to 40% of the stepsize) or to three years (for
objects dated to a number of years exceeding 60% of the stepsize).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Beazley</span>, stepsize <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt; Using 'weight'-calculation (see https://doi.org/10.1017/aap.2021.8).</span></span>
<span><span class="co">#&gt; elapsed </span></span>
<span><span class="co">#&gt;   0.046</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Beazley</span>, stepsize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt; Using 'weight'-calculation (see https://doi.org/10.1017/aap.2021.8).</span></span>
<span><span class="co">#&gt; elapsed </span></span>
<span><span class="co">#&gt;   0.143</span></span></code></pre></div>
<p>Using larger step sizes is only recommended if the stepsize of 1 year
leads to significant delays in processing while yielding no additional
information. If one where to look at a total time span of 10000 years,
step sizes of 1 no longer seem very reasonable or rather necessary, as
such detailed changes should not be visible or graspable at all, and
using steps of 100 years will lead to the same outcome. As classical
archaeologists a duration of more than 1000 years mostly exceeds our
area of study. We seem to get good results with stepsizes between 1 and
25.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lsteinmann/datplot" class="external-link">datplot</a></span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Beazley</span>, stepsize <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using 'weight'-calculation (see https://doi.org/10.1017/aap.2021.8).</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>, fill <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">25</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/steps1-1.png" width="672" style="display: block; margin: auto;"></p>
<p><code><a href="../reference/datsteps.html">datsteps()</a></code> can also calculate a stepsize on its own. It
equals the closest possible dating of any object. As the stepsize used
is saved in an attribute, this can be recycled to dynamically chose the
binwidth for histograms:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Beazley</span>, stepsize <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using 'weight'-calculation (see https://doi.org/10.1017/aap.2021.8).</span></span>
<span><span class="co">#&gt; [1] "Using stepsize = 51 (auto)."</span></span>
<span><span class="co">#&gt; Warning in create.sub.objects(DAT_list, stepsize, calc, cumulative): stepsize</span></span>
<span><span class="co">#&gt; is larger than the range of the closest dated object at Index = 1, 2, 3, 4, 5,</span></span>
<span><span class="co">#&gt; 6, 7, 8, 9, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 29,</span></span>
<span><span class="co">#&gt; 30, 31, 32, 33, 34, 35, 37, 38, 39, 40, 42, 44, 45, 46, 47, 48, 49, 50, 51, 52,</span></span>
<span><span class="co">#&gt; 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72,</span></span>
<span><span class="co">#&gt; 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 93,</span></span>
<span><span class="co">#&gt; 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110,</span></span>
<span><span class="co">#&gt; 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 125, 126, 127,</span></span>
<span><span class="co">#&gt; 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 140, 141, 142, 143, 144,</span></span>
<span><span class="co">#&gt; 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160,</span></span>
<span><span class="co">#&gt; 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 176, 177, 178,</span></span>
<span><span class="co">#&gt; 179, 180, 181, 182, 183, 184, 186, 187, 188, 190, 191, 192, 193, 194, 195, 196,</span></span>
<span><span class="co">#&gt; 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212,</span></span>
<span><span class="co">#&gt; 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228,</span></span>
<span><span class="co">#&gt; 229, 230, 232, 233, 234, 236, 237, 238, 239, 240, 242, 243, 244, 245, 246, 247,</span></span>
<span><span class="co">#&gt; 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263,</span></span>
<span><span class="co">#&gt; 264, 265, 266, 267, 269, 270, 271, 273, 275, 276, 277, 279, 280, 281, 282, 283,</span></span>
<span><span class="co">#&gt; 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299,</span></span>
<span><span class="co">#&gt; 301, 302, 303, 304, 305, 307, 308, 309, 310, 311, 312, 314, 315, 316, 317, 318,</span></span>
<span><span class="co">#&gt; 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 335, 336,</span></span>
<span><span class="co">#&gt; 337, 339, 340, 341, 342, 343, 344, 345, 347, 348, 349, 351, 352, 353, 354, 355,</span></span>
<span><span class="co">#&gt; 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371,</span></span>
<span><span class="co">#&gt; 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 387, 388,</span></span>
<span><span class="co">#&gt; 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405,</span></span>
<span><span class="co">#&gt; 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421,</span></span>
<span><span class="co">#&gt; 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 433, 434, 436, 437, 438, 439,</span></span>
<span><span class="co">#&gt; 440, 441, 442, 443, 444, 445, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456,</span></span>
<span><span class="co">#&gt; 457, 458, 459, 460, 461, 462, 463, 464, 466, 467, 468, 469, 470, 471, 472, 473,</span></span>
<span><span class="co">#&gt; 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489,</span></span>
<span><span class="co">#&gt; 490, 491, 492, 493, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506,</span></span>
<span><span class="co">#&gt; 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522,</span></span>
<span><span class="co">#&gt; 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538,</span></span>
<span><span class="co">#&gt; 539, 540, 541, 542, 543, 544, 545, 546, 547, 548, 549, 550, 551, 552, 553, 554,</span></span>
<span><span class="co">#&gt; 555, 556, 557, 559, 560, 561, 562, 563, 564, 565, 566, 567, 569, 570, 571, 572,</span></span>
<span><span class="co">#&gt; 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 586, 587, 588,</span></span>
<span><span class="co">#&gt; 589, 590, 591, 592, 593, 594, 595, 596, 597, 598, 599, 600, 601, 602, 605, 606,</span></span>
<span><span class="co">#&gt; 607, 608, 609, 610, 611, 612, 613, 615, 616, 617, 618, 619, 620, 621, 622, 623,</span></span>
<span><span class="co">#&gt; 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 637, 638, 639, 640,</span></span>
<span><span class="co">#&gt; 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 657,</span></span>
<span><span class="co">#&gt; 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 674,</span></span>
<span><span class="co">#&gt; 675, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 692,</span></span>
<span><span class="co">#&gt; 693, 694, 695, 698, 699, 700, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711,</span></span>
<span><span class="co">#&gt; 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727,</span></span>
<span><span class="co">#&gt; 728, 729, 730, 731, 732, 733, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744,</span></span>
<span><span class="co">#&gt; 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 759, 760, 761,</span></span>
<span><span class="co">#&gt; 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777,</span></span>
<span><span class="co">#&gt; 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793,</span></span>
<span><span class="co">#&gt; 794, 795, 796, 797, 798, 799, 800, 801, 802, 803, 804, 805, 806, 807, 808, 809,</span></span>
<span><span class="co">#&gt; 810, 811, 812, 813, 814, 815, 817, 818, 819, 820, 821, 822, 823, 825, 826, 827,</span></span>
<span><span class="co">#&gt; 828, 829, 830, 831, 832, 833, 834, 835, 836, 838, 839, 840, 841, 842, 843, 844,</span></span>
<span><span class="co">#&gt; 845, 846, 847, 848, 851, 852, 853, 855, 856, 857, 858, 859, 860, 861, 862, 863,</span></span>
<span><span class="co">#&gt; 864, 865, 866, 868, 869, 870, 871, 872, 873, 875, 876, 877, 878, 879, 881, 882,</span></span>
<span><span class="co">#&gt; 883, 884, 885, 886, 887, 888, 889, 890, 891, 892, 893, 894, 895, 896, 897, 898,</span></span>
<span><span class="co">#&gt; 899, 900, 901, 902, 903, 904, 905, 906, 907, 909, 910, 911, 913, 914, 915, 916,</span></span>
<span><span class="co">#&gt; 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 930, 931, 932,</span></span>
<span><span class="co">#&gt; 933, 934, 935, 936, 937, 938, 939, 940, 941, 943, 944, 945, 946, 947, 948, 949,</span></span>
<span><span class="co">#&gt; 950, 951, 952, 953, 954, 955, 956, 958, 959, 961, 962, 963, 964, 965, 966, 967,</span></span>
<span><span class="co">#&gt; 968, 969, 970, 971, 972, 973, 974, 975, 976, 977, 978, 979, 980, 982, 983, 984,</span></span>
<span><span class="co">#&gt; 985, 986, 987, 988, 989, 990, 991, 992, 993, 994, 995, 996, 998, 999, 1000).</span></span>
<span><span class="co">#&gt; For information see documentation of get.step.sequence().</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>, fill <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span><span class="op">$</span><span class="va">stepsize</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/steps2-1.png" width="672" style="display: block; margin: auto;"></p>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">variable</th>
<th align="right">DAT_min</th>
<th align="right">DAT_max</th>
<th align="right">weight</th>
<th align="right">DAT_step</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">10957</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
<td align="right">0.02</td>
<td align="right">-550</td>
</tr>
<tr class="even">
<td align="left">10957</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
<td align="right">0.02</td>
<td align="right">-525</td>
</tr>
<tr class="odd">
<td align="left">10957</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
<td align="right">0.02</td>
<td align="right">-500</td>
</tr>
<tr class="even">
<td align="left">352414</td>
<td align="left">RED-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
<td align="right">0.02</td>
<td align="right">-525</td>
</tr>
<tr class="odd">
<td align="left">352414</td>
<td align="left">RED-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
<td align="right">0.02</td>
<td align="right">-500</td>
</tr>
<tr class="even">
<td align="left">352414</td>
<td align="left">RED-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
<td align="right">0.02</td>
<td align="right">-475</td>
</tr>
</tbody>
</table>
<p>As the sample we use here only encompasses objects dated with a
resolution of 50 years, we it would be best to also proceed with this
stepsize. A smaller stepsize would not paint a more detailed picture, it
just uses up computing time without any benefit.</p>
<p>Due to the impossibility of displaying object counts as well, it is
ideal to use kernel density estimates for visualization. The density
plot below shows the result. The peak at around -500 indicates that is
area has the highest overlay, so a large part of the objects in our
sample have been dated around this time. The same distribution can also
be seen in the bar plots above. This, however, is not yet very
informative.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Beazley</span>, stepsize <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using 'weight'-calculation (see https://doi.org/10.1017/aap.2021.8).</span></span>
<span><span class="va">dens</span> <span class="op">&lt;-</span> <span class="va">result</span></span>
<span><span class="va">dens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scaleweight.html">scaleweight</a></span><span class="op">(</span><span class="va">result</span>, var <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="va">dens</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/density.html" class="external-link">density</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dens</span><span class="op">$</span><span class="va">DAT_step</span>, weights <span class="op">=</span> <span class="va">dens</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in density.default(x = dens$DAT_step, weights = dens$weight): Selecting</span></span>
<span><span class="co">#&gt; bandwidth *not* using 'weights'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dens</span><span class="op">)</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/density%20one-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="scaling-the-weight-along-groups-of-objects">Scaling the Weight along Groups of Objects<a class="anchor" aria-label="anchor" href="#scaling-the-weight-along-groups-of-objects"></a>
</h2>
<p>In order to display the objects separated into groups, the weights
first have to be scaled along group membership, so that the sum of all
weights in a group will equal 1. datplots function
<code><a href="../reference/scaleweight.html">scaleweight()</a></code> does exactly that for a dataframe as it was
returned by <code><a href="../reference/datsteps.html">datsteps()</a></code>. A column that contains the
variables for group membership needs to indicated.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scaleweight.html">scaleweight</a></span><span class="op">(</span><span class="va">result</span>, var <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">variable</th>
<th align="right">DAT_min</th>
<th align="right">DAT_max</th>
<th align="right">weight</th>
<th align="right">DAT_step</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">10957</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
<td align="right">0.0006993</td>
<td align="right">-550</td>
</tr>
<tr class="even">
<td align="left">10957</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
<td align="right">0.0006993</td>
<td align="right">-525</td>
</tr>
<tr class="odd">
<td align="left">10957</td>
<td align="left">BLACK-FIGURE</td>
<td align="right">-550</td>
<td align="right">-500</td>
<td align="right">0.0006993</td>
<td align="right">-500</td>
</tr>
<tr class="even">
<td align="left">352414</td>
<td align="left">RED-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
<td align="right">0.0006506</td>
<td align="right">-525</td>
</tr>
<tr class="odd">
<td align="left">352414</td>
<td align="left">RED-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
<td align="right">0.0006506</td>
<td align="right">-500</td>
</tr>
<tr class="even">
<td align="left">352414</td>
<td align="left">RED-FIGURE</td>
<td align="right">-525</td>
<td align="right">-475</td>
<td align="right">0.0006506</td>
<td align="right">-475</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="plots-for-the-distribution-of-objects-across-time">Plots for the Distribution of Objects across Time<a class="anchor" aria-label="anchor" href="#plots-for-the-distribution-of-objects-across-time"></a>
</h2>
<p>In the case of the Beazley archives data <span class="citation">(Oxford n.d.)</span> we can clearly see what we knew
before: Black-figure pottery is older than red-figure pottery. (The data
are from a random sample of athenian pottery from the Beazley archive, n
= 1000.)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>,</span>
<span>                          fill <span class="op">=</span> <span class="va">variable</span>,</span>
<span>                          weight <span class="op">=</span> <span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Dating"</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/ggplot-1.png" width="672" style="display: block; margin: auto;"></p>
<p>In case of this data, the changes between showing and omitting the
weight are negligent. This, however, is <strong>not</strong> the case
with more heterogeneously dated sets of objects (see the “Data
Preparation and Visualization”-vignette). Please note that – even with
the Beazley-data – the plot, however little, does change when the
weights are omitted:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>,</span>
<span>                          fill <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Dating"</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/ggplot%20without%20weight-1.png" width="672" style="display: block; margin: auto;"></p>
<p>When every step is valued equally, a lot of steps fall into the end
of the 4th century (as mentioned above), since they were dated as
e.g. “-400 to -300”. The impact here is not very huge, as the dating
ranges of the objects do not vary greatly. However, the differences can
be very dramatic for more heterogeneous data.</p>
<p>To quickly illustrate that we can plot two versions of the density
from the Inscriptions of Bithynia data included in the package:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Inscr_Bithynia"</span><span class="op">)</span></span>
<span><span class="va">Inscr_Bithynia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">Inscr_Bithynia</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">result_bith</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scaleweight.html">scaleweight</a></span><span class="op">(</span><span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Inscr_Bithynia</span>, stepsize <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span>,</span>
<span>                           var <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using 'weight'-calculation (see https://doi.org/10.1017/aap.2021.8).</span></span>
<span><span class="co">#&gt; [1] "Using stepsize = 1 (auto)."</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">result_bith</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, fill <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Dating"</span><span class="op">)</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">result_bith</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>, weight <span class="op">=</span> <span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, fill <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Dating"</span><span class="op">)</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/unnamed-chunk-3-2.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="including-histograms-for-an-impression-of-quantity">Including Histograms for an Impression of Quantity<a class="anchor" aria-label="anchor" href="#including-histograms-for-an-impression-of-quantity"></a>
</h2>
<p>We also added a function that calculated the value needed to scale
the density curve to the axis of a Histogram of the dating steps. Please
note that the histogram will not show the actual objects counts, but the
counts of the maximum possible objects dated to the corresponding year
resp. bin. The value to scale the density curve for a combined plot with
a histogram can be obtained via <code>get.histogramscale</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">histogramscale</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get.histogramscale.html">get.histogramscale</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>, fill <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="va">Plot_Theme</span> <span class="op">+</span> <span class="va">Plot_Fill</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">stat_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, position <span class="op">=</span> <span class="st">"dodge"</span>,</span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">density</span><span class="op">)</span> <span class="op">*</span> <span class="va">histogramscale</span><span class="op">)</span>, weight <span class="op">=</span> <span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, binwidth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span><span class="op">$</span><span class="va">stepsize</span>,</span>
<span>                 position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"maximum number of objects per year"</span>, x <span class="op">=</span> <span class="st">"Dating"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in density.default(x, weights = w, bw = bw, adjust = adjust, kernel =</span></span>
<span><span class="co">#&gt; kernel, : Selecting bandwidth *not* using 'weights'</span></span>
<span></span>
<span><span class="co">#&gt; Warning in density.default(x, weights = w, bw = bw, adjust = adjust, kernel =</span></span>
<span><span class="co">#&gt; kernel, : Selecting bandwidth *not* using 'weights'</span></span>
<span><span class="co">#&gt; Warning: Width not defined</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Set with `position_dodge(width = ...)`</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/ggplot-combination-1.png" width="672" style="display: block; margin: auto;"></p>
<p>The combination of density curve and histogram also shows the common
problem of histograms. Their output depends significantly on where the
first bin is placed and may show a skewed distribution especially for
roughly dated objects. Additionally, histograms also depend greatly on
the binwidth and may not display any meaningful pattern when small bins
are chosen <span class="citation">(Shennan 1988, 25–26; Baxter and
Beardah 1996)</span>.</p>
<p>The smooth curves of kernel density estimates are a more realistic
approach to dating. The production of objects was as continuous as their
use, so it seems only reasonable to display it in a more continuous
fashion on a flexible timescale.</p>
</div>
<div class="section level2">
<h2 id="weights-and-cumulative-weights">Weights and Cumulative Weights<a class="anchor" aria-label="anchor" href="#weights-and-cumulative-weights"></a>
</h2>
<p>With the update to v1.1.0 there are new option for calculation. When
using a stepsize of 1 and <code>calc = "probability"</code>, the weights
now reflect the true probability for each objects dating into the
specific year. With this, the probability may be used as an indicative
value itself and not only as a helper for visualization. Many thanks to
Christian Gugl for this suggestion.</p>
<p>This now opens the possibility to calculate the cumulative
probability for each successive year – also suggested by Christian Gugl
–, which is useful in the case of numismatic research, where it reflects
the rising probability of minting. The cumulative probability has been
introduced as an option in v1.1.0 and is calculated in a separate column
when setting <code>cumulative = TRUE</code> in the
<code><a href="../reference/datsteps.html">datsteps()</a></code>-function. Please note that the cumulative
probability does not work (and does not mean anything) for stepsizes
larger than 1!</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Inscr_Bithynia"</span><span class="op">)</span></span>
<span><span class="va">Inscr_Bithynia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">Inscr_Bithynia</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">Inscr_Bithynia</span> <span class="op">&lt;-</span> <span class="va">Inscr_Bithynia</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">Inscr_Bithynia</span><span class="op">)</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">Inscr_Bithynia_steps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datsteps.html">datsteps</a></span><span class="op">(</span><span class="va">Inscr_Bithynia</span>, </span>
<span>                                 stepsize <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                                 calc <span class="op">=</span> <span class="st">"probability"</span>, </span>
<span>                                 cumulative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using step-wise probability calculation.</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">Inscr_Bithynia_steps</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">DAT_step</span>, y <span class="op">=</span> <span class="va">cumul_prob</span>, fill <span class="op">=</span> <span class="va">variable</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">ID</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Cumulative Probability"</span>, x <span class="op">=</span> <span class="st">"Dating"</span>, fill <span class="op">=</span> <span class="st">"Origin"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="how-to_files/figure-html/cumulative%20demo-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-baxter_histogramimprovedapproachessimple_1996" class="csl-entry">
Baxter, Mike J., and Christian C. Beardah. 1996. <span>“Beyond the
Histogram – Improved Approaches to Simple Data Display in Archaeology
Using Kernel Density Estimates.”</span> <em>Archeologia e
Calcolatori</em> 7 (1): 397–408.
</div>
<div id="ref-baxter_ReinventingwheelModelling_2016" class="csl-entry">
Baxter, Mike J., and H. E. M. Cool. 2016. <span>“Reinventing the Wheel?
Modelling Temporal Uncertainty with Applications to Brooch Distributions
in Roman Britain.”</span> <em>Journal of Archaeological Science</em> 66
(February): 120–27. <a href="https://doi.org/10.1016/j.jas.2015.12.007" class="external-link">https://doi.org/10.1016/j.jas.2015.12.007</a>.
</div>
<div id="ref-crema_probabilisticframeworkassessing_2010" class="csl-entry">
Crema, Enrico R., Andrew Bevan, and Mark W. Lake. 2010. <span>“A
Probabilistic Framework for Assessing Spatio-Temporal Point Patterns in
the Archaeological Record.”</span> <em>Journal of Archaeological
Science</em> 37 (5): 1118–30. <a href="https://doi.org/10.1016/j.jas.2009.12.012" class="external-link">https://doi.org/10.1016/j.jas.2009.12.012</a>.
</div>
<div id="ref-johnson_AoristicAnalysisSeeds_2004" class="csl-entry">
Johnson, Ian. 2004. <span>“Aoristic Analysis: Seeds of a New Approach to
Mapping Archaeological Distributions Through Time.”</span> In <em>2003 -
Enter the Past. The e-Way into the Four Dimensions of Cultural Heritage.
CAA 2003. Computer Applications and Quantitative Methods in
Archaeology</em>, edited by W. Börner and M. Goriany. Oxford:
Archaeopress. <a href="https://publikationen.uni-tuebingen.de/xmlui/handle/10900/60663" class="external-link">https://publikationen.uni-tuebingen.de/xmlui/handle/10900/60663</a>.
</div>
<div id="ref-orton_CatchUnitResearch_2017" class="csl-entry">
Orton, David, James Morris, and Alan Pipe. 2017. <span>“Catch Per Unit
Research Effort: Sampling Intensity, Chronological Uncertainty, and the
Onset of Marine Fish Consumption in Historic London.”</span> <em>Open
Quaternary</em> 3 (January): 1. <a href="https://doi.org/10.5334/oq.29" class="external-link">https://doi.org/10.5334/oq.29</a>.
</div>
<div id="ref-BAPD" class="csl-entry">
Oxford, University of. n.d. <span>“Beazley Archive Pottery Database
(<span>BAPD</span>).”</span> Accessed April 27, 2018. <a href="https://www.carc.ox.ac.uk/carc/pottery" class="external-link">https://www.carc.ox.ac.uk/carc/pottery</a>.
</div>
<div id="ref-ratcliffe_Aoristicanalysisspatial_2000" class="csl-entry">
Ratcliffe, Jerry H. 2000. <span>“Aoristic Analysis: The Spatial
Interpretation of Unspecific Temporal Events.”</span> <em>International
Journal of Geographical Information Science</em> 14 (7): 669–79. <a href="https://doi.org/10.1080/136588100424963" class="external-link">https://doi.org/10.1080/136588100424963</a>.
</div>
<div id="ref-shennan_Quantifyingarchaeology_1988" class="csl-entry">
Shennan, Stephen. 1988. <em>Quantifying Archaeology</em>. Edinburgh:
Edinburgh University Press.
</div>
<div id="ref-datplotarticle" class="csl-entry">
Weissova, Barbora, and Lisa Steinmann. 2021. <span>“Datplot:
<span>A</span> New r-Package for the Visualization of Date Ranges in
Archaeology.”</span> <em>Advances in Archaeological Practice</em> 9 (7):
288–98. <a href="https://doi.org/10.1017/aap.2021.8" class="external-link">https://doi.org/10.1017/aap.2021.8</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lisa Steinmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
